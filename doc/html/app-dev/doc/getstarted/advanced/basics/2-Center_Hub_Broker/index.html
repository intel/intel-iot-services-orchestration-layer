<h1 id="center-hub-and-broker">Center, Hub and Broker</h1><h2 id="center">Center</h2><p>While the <strong>Hub</strong> manages the <strong>Things</strong> (which is collection of <strong>Services</strong>), <strong>Center</strong> manages all <strong>Hubs</strong>.</p><p>The <strong>Center</strong> provides the HTML5 Web IDE so that developers could navigate through a modern browser to create IoT applications. The UI defined by created IoT Application, is also provided by HTML5 so that end users could also use browser and navitage to <strong>Center</strong> to see the user interface of the application.</p><p>The <strong>Workflows</strong>, is the logic of the IoT application, which is defined by developers through drag and drop in the IDE, is also stored at <strong>Center</strong> and executed by <strong>Center</strong>.</p><p>One thing need to mention is that the <strong>Center</strong> also have an embedded <strong>Hub</strong> in it, which is called as <strong>Builtin Hub</strong>. It provides a lot of builtin <strong>Services</strong> by default, and also hosts of virtual <strong>Things</strong> that represent the UI widgets used by the users.</p><h2 id="broker">Broker</h2><p>The <strong>Workflow</strong> uses <strong>Services</strong> managed by various <strong>Hubs</strong>. Therefore, during the execution of the <strong>Workflow</strong>, the <strong>Center</strong> need to communicate with these <strong>Hubs</strong> to send messages to and receive messages from the <strong>Services</strong> on these <strong>Hubs</strong>.</p><p>Such communication (send / receive or publish / subscribe of messages) happens with the help of a message <strong>Broker</strong>. The <strong>Broker</strong> acts like a proxy, a message (no matter from <strong>Center</strong> to <strong>Hub</strong> or from <strong>Hub</strong> to <strong>Center</strong>) is always sent to <strong>Broker</strong>, and <strong>Broker</strong> would correctly dispatch it to the right target.</p><p>Intel(r) IoT Services Orchestration Layer allows to use multiple type of <strong>Brokers</strong>, for example, a <strong>Broker</strong> based on MQTT, or based on HTTP, etc. Please see <a href="#getstarted/advanced/configuration">Configuration</a> for more details.</p><p>Advanced developers could enable more kind of <strong>Brokers</strong> by implemented a very limited set of APIs required by Intel(r) IoT Services Orchestration Layer.</p><h2 id="how-to-start-center-hub-and-broker">How to start Center, Hub and Broker</h2><p>To start a <strong>Center</strong>, simply run <code>./center [config]</code>. The <code>[config]</code> is the path to a configuration file. It's optional and would use <code>./config.json</code> if it is omitted.</p><p>Similarly, running <code>./hub [config]</code> would start a <strong>Hub</strong>. <code>[config]</code> is similar as above.</p><p>The details of the <code>config.json</code> is described at <a href="#getstarted/advanced/configuration">Configuration</a>.</p><p>If one already have MQTT setup and started, he/she could use it as a <strong>Broker</strong> by doing some configuration in <code>config.json</code>.</p><p>Otherwise, users may start a simple HTTP broker comes with this project, which uses HTTP to communicate with <strong>Center</strong> and <strong>Hubs</strong>. To start this HTTP broker, simpley run <code>./http_broker [port]</code>. <code>[port]</code> specifies the tcp/ip port for this broker, it uses 16666 by default if omitted. To use this HTTP broker, the <code>config.json</code> also need certain configuration as well.</p><p>There may be some helper scripts such as <code>./start_mock_demo.sh</code> etc., which would hide these details and start a <strong>Center</strong>, a <strong>Broker</strong> and some <strong>Hubs</strong> in one batch.</p><h2 id="illustration">Illustration</h2><p>The picture below illustrates the relationship between Center, Broker and Hubs.</p><div class="figure"><img src="./doc/pic/advanced/basics/Center_Broker_Hub.png" class="viewer" /></div>
